
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>PAVITS: Exploring Prosody-Aware VITS for End-to-End Emotional Voice Conversion - Sapphire Lab</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.9f615399.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pavits-exploring-prosody-aware-vits-for-end-to-end-emotional-voice-conversion" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Sapphire Lab" class="md-header__button md-logo" aria-label="Sapphire Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sapphire Lab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PAVITS: Exploring Prosody-Aware VITS for End-to-End Emotional Voice Conversion
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Sapphire Lab" class="md-nav__button md-logo" aria-label="Sapphire Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Sapphire Lab
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TTS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../PDE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PDE
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    Abstract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1introduction" class="md-nav__link">
    1.Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2proposed-method" class="md-nav__link">
    2.Proposed Method
  </a>
  
    <nav class="md-nav" aria-label="2.Proposed Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21textual-prosody-prediction-module" class="md-nav__link">
    2.1.Textual Prosody Prediction Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22acoustic-prosody-modeling-module" class="md-nav__link">
    2.2.Acoustic Prosody Modeling Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23information-alignment-module" class="md-nav__link">
    2.3.Information Alignment Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24emotional-speech-synthesis-module" class="md-nav__link">
    2.4.Emotional Speech Synthesis Module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25final-loss" class="md-nav__link">
    2.5.Final Loss
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26run-time-conversion" class="md-nav__link">
    2.6.Run-Time Conversion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3experiments" class="md-nav__link">
    3.Experiments
  </a>
  
    <nav class="md-nav" aria-label="3.Experiments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31datasets" class="md-nav__link">
    3.1.Datasets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32experimental-setup" class="md-nav__link">
    3.2.Experimental Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33results-discussion" class="md-nav__link">
    3.3.Results &amp; Discussion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34ablation-study" class="md-nav__link">
    3.4.Ablation Study
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4conclusion" class="md-nav__link">
    4.Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="pavits-exploring-prosody-aware-vits-for-end-to-end-emotional-voice-conversion">PAVITS: Exploring Prosody-Aware VITS for End-to-End Emotional Voice Conversion<a class="headerlink" href="#pavits-exploring-prosody-aware-vits-for-end-to-end-emotional-voice-conversion" title="Permanent link">&para;</a></h1>
<h2 id="abstract">Abstract<a class="headerlink" href="#abstract" title="Permanent link">&para;</a></h2>
<blockquote>
<p>In this paper, we propose <strong>Prosody-Aware VITS (PAVITS)</strong> for emotional voice conversion (EVC), aiming to achieve two major objectives of EVC: high content naturalness and high emotional naturalness, which are crucial for meeting the demands of human perception.
To improve the content naturalness of converted audio, we have developed an end-to-end EVC architecture inspired by the high audio quality of VITS.
By seamlessly integrating an acoustic converter and vocoder, we effectively address the common issue of mismatch between emotional prosody training and run-time conversion that is prevalent in existing EVC models.
To further enhance the emotional naturalness, we introduce an emotion descriptor to model the subtle prosody variations of different speech emotions.
Additionally, we propose a prosody predictor, which predicts prosody features from text based on the provided emotion label.
Notably, we introduce a prosody alignment loss to establish a connection between latent prosody features from two distinct modalities, ensuring effective training.
Experimental results show that the performance of <strong>PAVITS</strong> is superior to the state-of-the-art EVC methods.
Speech Samples are available at https://jeremychee4.github.io/pavits4EVC/.</p>
</blockquote>
<h2 id="1introduction">1.Introduction<a class="headerlink" href="#1introduction" title="Permanent link">&para;</a></h2>
<blockquote>
<p>Emotional voice conversion (EVC) endeavors to transform the state of a spoken utterance from one emotion to another, while preserving the linguistic content and speaker identity [1].
It brings the capability to facilitate emotional communication between individuals [2], enhancing the user experience in human-computer interaction [3], and even achieving a seamless integration of human presence within the virtual world [4].</p>
<p>There are two distinct challenges in EVC: one is low content naturalness, and the other is that the converted audio lacks the richness of emotion compared to human voice [1].
Previous studies were focused on frame-based solutions, such as CycleGAN [5] and StarGAN [6,7].
However, due to the fixed-length nature and poor training stability, the naturalness of converted audio is quite low to apply in practice.
To address this challenge, autoencoder-based [8,9] especially for sequence-to-sequence (seq2seq) [10,11] frameworks raise much interests for its variable-length speech generation.
It achieves an acceptable naturalness through the joint training with Text-to-speech (TTS) [12], which is used to capture linguistic information and avoid mispronunciation as well as skipping-words.
Since speech emotion is inherently supra-segmental [13], it is difficult to learn emotional representation from the spectrogram.
To tackle this, various pretraining methods, such as leveraging speech emotion recognition (SER) model [14] and 2-stage training strategy [15], are introduced to extract emotional feature for EVC system.</p>
<p>Despite these works have achieved great success in EVC, the converted audio still falls short in meeting human’s perceptual needs, which implies that these two challenges still remain to be effectively addressed.
Remarkably, current EVC models generally operate in a cascade manner, i.e., the acoustic converter and the vocoder [1, 5, 7, 8], resulting in a mismatch between emotional prosody training and run-time conversion, ultimately leading to a degradation in audio quality, which is vital to evaluate content naturalness and impacts the perceptual experience of emotional utterance.
However, there is no EVC model that attempt to bridge this gap, let alone models that aim to capture prosody variations at a finer granularity.
To handle the similar issue, multiple solutions have been explored in TTS, including <a href="../2019.05_FastSpeech/2020.06_FastSpeech2.md">FastSpeech2s (2020)</a>, EATS [17], <a href="../2021.06_VITS/2021.06_VITS.md">VITS (2021)</a> [19], etc., seeking to alleviate the mismatch between acoustic feature generation and waveform reconstruction by integrating these two stages together.</p>
<p>In this paper, inspired by the high audio quality of <a href="../2021.06_VITS/2021.06_VITS.md">VITS (2021)</a>, we propose <strong>Prosody-Aware VITS (PAVITS)</strong> for EVC, a novel end-to-end system with implicit prosody modeling to enhance content naturalness and emotional naturalness.
To our best knowledge, <strong>PAVITS</strong> is the first EVC method in solving the mismatch between acoustic feature conversion and waveform reconstruction.
Compared to <a href="../2021.06_VITS/2021.06_VITS.md">original VITS (2021)</a>, our approach involves several key innovations.
In order to improve content naturalness with speech quality, we build upon <a href="../2021.06_VITS/2021.06_VITS.md">VITS (2021)</a> to solve the two-stage mismatch in EVC, and apply multi-task learning since TTS can significantly reduce the mispronunciation.
To enhance emotional naturalness, we introduce an emotion descriptor to capture prosody differences associated with different emotional states in speech.
By utilizing Valence-Arousal-Dominance values as condition, emotional representation at utterance-level is learned.
Latent code is further refined by a prosody integrator, which incorporates with speaker identity and linguistic content to model finer-grained prosody variations.
Then frame-level prosody features are obtained from normalizing flow.
We also introduce a prosody predictor that leverages emotion labels and phoneme-level text embedding to predict frame-level emotional prosody features.
Finally, we devise a prosody alignment loss to connect two modalities, aligning prosody features obtained from audio and text, respectively.</p>
</blockquote>
<h2 id="2proposed-method">2.Proposed Method<a class="headerlink" href="#2proposed-method" title="Permanent link">&para;</a></h2>
<blockquote>
<p>As shown in Fig.01, inspired by <a href="../2021.06_VITS/2021.06_VITS.md">VITS (2021)</a>, the proposed model is constructed based on conditional variational autoencoder (CVAE), consisting of four parts: a textual prosody prediction module, an acoustic prosody modeling module, an information alignment module, and an emotional speech synthesis module.</p>
<p>The textual prosody prediction (TPP) module predicts the prior distribution $p(z_1|c_1)$ as:</p>
</blockquote>
<p>$$
    z_1= TPP (c_1) \sim p (z_1| c_1)\tag{1} 
$$</p>
<blockquote>
<p>where $c_1$ including text $t$ and emotion label $e$.</p>
<p>The acoustic prosody modeling (APM) module disentangles emotional features with intricate prosody variation, speaker identity, and linguistic content from the source audio given emotion label, forming the posterior distribution $q(z_2|c_2)$ as: </p>
</blockquote>
<p>$$
    z_2= APM (c_2) \sim q (z_2|c_2)\tag{2} 
$$</p>
<blockquote>
<p>where $c_2$ including audio $y$ and emotion label $e$.</p>
<p>The information alignment module facilitates the alignment of text and speech, as well as the alignment of textual and acoustic prosody representations.
In emotional speech synthesis (ESS) module, the decoder reconstructs waveform $\hat{y}$ according to latent representation $z$.</p>
</blockquote>
<p>$$
    \hat{y} = Decoder (z) \sim p (y | z)\tag{3}
$$</p>
<blockquote>
<p>where $z$ comes from $z_1$ or $z_2$.</p>
<p>While the proposed model can perform both EVC and emotional TTS after training, EVC will be the main focus of this paper.
In the following, we will introduce the details of the four modules.</p>
</blockquote>
<h3 id="21textual-prosody-prediction-module">2.1.Textual Prosody Prediction Module<a class="headerlink" href="#21textual-prosody-prediction-module" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Given condition $c_1$ including text $t$ and emotion label $e$, the textual prosody prediction module provides the prior distribution $p(z_1|c_1)$ of CVAE.
The text encoder takes phonemes as input and extracts linguistic information $h_{text}$ at first.
Considering the extensive prosody variation associated with each phoneme, we employ a prosody predictor to extend the representation to frame-level and predict the prosody variation (a fine-grained prior normal distribution with mean $\mu_{\theta}$ and variance $\sigma_{\theta}$ generated by a normalizing flow $f_{\theta}$) based on emotion label. </p>
</blockquote>
<p>$$
    p(z_1|c_1) = \mathcal{N}(f_{\theta}(z_1); \mu_{\theta}(c_1);\sigma_{\theta}(c_1))\left|\det\dfrac{\partial f_{\theta}(z_1)}{\partial z}\right|\tag{4}
$$</p>
<blockquote>
<p>Text Encoder: Since the training process is constrained by the volume of textual content within parallel datasets, we initially convert text or characters into a phoneme sequence as a preprocessing step to maximize the utility of the available data, resulting in improved compatibility with the acoustic prosody modeling module.
Similar to <a href="../2021.06_VITS/2021.06_VITS.md">VITS (2021)</a>, text encoder comprises multiple Feed-Forward Transformer (FFT) blocks with a linear projection layer for representing linguistic information.</p>
<p>Prosody Predictor: Prosody predictor leverages phoneme-level linguistic information extracted by the text encoder to anticipate frame-level prosody variation given discrete emotion label.
It has been observed that simply increasing the depth of stacked flow does not yield satisfactory emotional prosody variations, unlike the prosody predictor.
Therefore, the inclusion of the prosody predictor guarantees a continuous enhancement in prosody modeling for both the TPP and APM modules.
The prosody predictor comprises multiple one-dimensional convolution layers and a linear projection layer.
Furthermore, we integrate predicted emotional prosody information with linguistic information as input for the duration predictor, which significantly benefits the modeling of emotional speech duration.</p>
</blockquote>
<h3 id="22acoustic-prosody-modeling-module">2.2.Acoustic Prosody Modeling Module<a class="headerlink" href="#22acoustic-prosody-modeling-module" title="Permanent link">&para;</a></h3>
<blockquote>
<p>The acoustic prosody modeling module provides emotional features with fine-grained prosody variation based on dimensional emotion representation, i.e., Valence-Arousal-Dominance values.Speaker identity and speech content information are also disentangled from the source audio and then complete feature fusion through the prosody integrator as the posterior distribution $q (z_2|c_2)$. </p>
</blockquote>
<p>$$
    q(z_2|c_2) = \mathcal{N}(f_{\theta}(z_2); \mu_{\theta}(c_2);\sigma_{\theta}(c_2))\tag{5}
$$</p>
<blockquote>
<p>Speaker encoder: Considering the APM module’s increased focus on understanding emotional prosody more thoroughly compared to previous models, it’s apparent that speaker characteristics could unintentionally be overlooked during conversion.Recognizing the critical role of fundamental frequency (F0) in speaker modeling [20], we augment the F0 predictor of <a href="../2021.10_VISinger/2021.10_VISinger.md">VISinger (2021)</a> by adding multiple one-dimensional convolutional layers and a linear layer to construct the speaker encoder, which tackles the issue effectively.</p>
<p>Emotion descriptor: To enhance <strong>PAVITS</strong>’s emotional naturalness, we employ a specific SER system rooted in Russell’s circumplex theory [22] to predict dimensional emotion representation, encompassing Valence-Arousal-Dominance values as a conditional input.
This input guides the capture of nuanced prosody variations, which ensures that while satisfying human perception of emotions at utterance-level, natural prosody variations are retained from segment-level down to frame-level, preserving intricate details.
It consists of a SER module [23] and a linear projection layer.</p>
<p>Prosody Integrator: The prosody integrator incorporates a combination of speaker identity attributes, emotional prosody characteristics, and intrinsic content properties extracted from the linear spectrogram.
It is constructed using multiple convolution layers, WaveNet residual blocks, and a linear projection layer.</p>
</blockquote>
<h3 id="23information-alignment-module">2.3.Information Alignment Module<a class="headerlink" href="#23information-alignment-module" title="Permanent link">&para;</a></h3>
<blockquote>
<p>In <a href="../2021.06_VITS/2021.06_VITS.md">VITS (2021)</a>, the existing alignment mechanism, which is called Monotonic Alignment Search (MAS), solely relies on textual and acoustic features from parallel datasets.
Thus, it is insufficient in capturing emotional prosody nuances, hindering effective linkage between the TPP and APM modules.
To overcome this limitation, we propose an additional prosody alignment loss function based on Kullback-Leibler divergence, to facilitate joint training for frame-level prosody modeling across the TPP and APM modules, with the goal of enhancing prosody information integration and synchronization within our model.</p>
</blockquote>
<p>$$
    L_{psd} = D_{KL}(q(z_2|c+2)| p(z_1|c_1))\tag{6}
$$</p>
<h3 id="24emotional-speech-synthesis-module">2.4.Emotional Speech Synthesis Module<a class="headerlink" href="#24emotional-speech-synthesis-module" title="Permanent link">&para;</a></h3>
<blockquote>
<p>In the emotional speech synthesis module, the decoder generates a waveform based on latent $z$, employing adversarial learning to continuously enhance naturalness in both content and emotion.
To improve the naturalness of content, $L_{recon-cls}$ minimizes the $L_1$ distance between predicted and target spectrograms, $L_{recon-fm}$ minimizes the $L_1$ distance between feature maps extracted from intermediate layers in each discriminator, aimed at enhancing training stability.
Since the former predominantly influences the early-to-mid stage, while the latter assumes a more prominent role in mid-to-late stage, we introduce two coefficients to balance their contributions as follows.</p>
</blockquote>
<p>$$
    L_{recon}= \gamma L_{recon-cls}+ \beta L_{recon-fm}(G)\tag{7}
$$</p>
<blockquote>
<p>To enhance the perception of emotions, $L_{emo-cls}$ represents the loss function for emotional classification, while $L_{emo-fm}$ denotes the loss associated with feature mapping for emotion discrimination.</p>
</blockquote>
<p>$$
    L_{emo}= L_{emo-cls}+ \beta L_{emo-fm}(G)\tag{8}
$$</p>
<h3 id="25final-loss">2.5.Final Loss<a class="headerlink" href="#25final-loss" title="Permanent link">&para;</a></h3>
<blockquote>
<p>By combining CVAE with adversarial training, we formulate the overall loss function as follows:</p>
</blockquote>
<p>$$
\begin{align}
    L &amp;= L_{recon}+ L_{adv}(G) + L_{emo}+ L_{psd}+ L_{F0}+ L_{dur}\tag{9}\
    L(D) &amp;= L_{adv}(D)\tag{10}
\end{align}
$$</p>
<blockquote>
<p>where $L_{adv}(G)$ and $L_{adv}(D)$ represent the adversarial loss for the Generator and Discriminator respectively, $L_{F0}$ minimizes the $L_2$ distance between the predicted F0 and corresponding ground truth, $L_{dur}$ minimizes the $L_2$ distance between the predicted duration and ground truth which is obtained through estimated alignment.</p>
</blockquote>
<h3 id="26run-time-conversion">2.6.Run-Time Conversion<a class="headerlink" href="#26run-time-conversion" title="Permanent link">&para;</a></h3>
<blockquote>
<p>At runtime, there are two converting methods: a fixed-length approach (Audio-$z_2$-Audio, named <strong>PAVITS-FL</strong>) and a variable-length approach (Audio-Text-$z_1$-Audio, named <strong>PAVITS-VL</strong>).
The former uses APM module for latent $z$ prediction from audio, ensuring robustness as it remains unaffected by text encoding, but is constrained by a fixed spectrum length due to Dynamic Time Warping (DTW) limitations.
The latter employs TPP module to predict latent $z$ from corresponding text obtained through automatic speech recognition (ASR) technique, which is not bound by duration modeling and offers greater naturalness.
Finally, the ESS module’s decoder takes latent $z$ (either $z_1$ or $z_2$) as input and synthesizes the converted waveform without a separate vocoder.</p>
</blockquote>
<h2 id="3experiments">3.Experiments<a class="headerlink" href="#3experiments" title="Permanent link">&para;</a></h2>
<h3 id="31datasets">3.1.Datasets<a class="headerlink" href="#31datasets" title="Permanent link">&para;</a></h3>
<blockquote>
<p>We perform emotional conversion on a Mandarin corpus belonged to Emotional Speech Dataset (ESD) [24] from neutral to angry, happy, sad, and surprise, denoted as Neu-Ang, Neu-Hap, Neu-Sad, Neu-Sur respectively.
For each emotion pair, we use 300 utterances for training, 30 utterances for evaluation, and 20 utterances for test.
The total duration of training data is around 80 minutes (16 minutes per emotion category), which is absolutely small compared to others.</p>
</blockquote>
<h3 id="32experimental-setup">3.2.Experimental Setup<a class="headerlink" href="#32experimental-setup" title="Permanent link">&para;</a></h3>
<blockquote>
<p>We train the following models for comparison.
- CycleGAN [25] (baseline): CycleGAN-based EVC model with WORLD vocoder.
- StarGAN [26] (baseline): StarGAN-based EVC model with WORLD vocoder.
- Seq2seq-WA2 [15] (baseline): Seq2seq-based EVC model employing 2-stage training strategy with WaveRNN vocoder.
- <a href="../2021.06_VITS/2021.06_VITS.md">VITS (2021)</a> (baseline):EVC model constructed by original VITS, operating independently in both fixed-length and variable-length, take the average as the result.
- <strong>PAVITS-FL</strong> (proposed): the proposed model based on VITS, incorporates all the contributions outlined in the paper, but operate within a fixed-length framework.
- <strong>PAVITS-VL</strong> (proposed): the proposed model based on VITS, incorporates all the contributions outlined in the paper, but operate within a variable-length framework leveraging ASR to obtain text from source audio.</p>
</blockquote>
<h3 id="33results-discussion">3.3.Results &amp; Discussion<a class="headerlink" href="#33results-discussion" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Mel-cepstral distortion (MCD) was calculated for objective evaluation, as depicted in Tab.01.In terms of subjective evaluation, Mean Opinion Score (MOS) tests were conducted to appraise both the quality and naturalness of speech as shown in Tab.02.
The naturalness score was derived by averaging the scores for content naturalness and emotional prosody naturalness, as rated by 24 participants, each of whom assessed a total of 148 utterances.
We further report emotional similarity results between converted audio and human voice to gauge emotional naturalness as illustrated in Fig.02.</p>
<p>Through the above-mentioned metrics, it is obvious that the proposed <strong>PAVITS</strong> achieves competitive performance on both objective and subjective evaluation.
From the perspective of objective MCD and subjective MOS, both original VITS and our proposed <strong>PAVITS</strong> models always outperform other models with traditional vocoder or neural vocoder, which proves that the integration of neural acoustic converter and vocoder is suitable for EVC task to enhance speech quality and naturalness.
It is worth noting that even in the case of the fixed-length <strong>PAVITS-FL</strong> model, there is a reduction of over 0.4 in MCD when compared to the variable-length seq2seq model and the original VITS model.
Furthermore, there has been an enhancement of 0.6 and 0.2 in MOS, respectively.
To some extent, it reflects how human tend to be influenced by audio quality when assessing model naturalness, especially when there are significant differences in quality being compared.</p>
<p>As depicted in Fig.02, our proposed <strong>PAVITS-VL</strong> (variable-length) model aligns more closely with human perception in the converted audio, which attributed to the model’s capacity for fine-grained granularity in modeling speech emotion, incorporating implicit prosody cues.To further show the effectiveness of our method, we visualize the spectrogram of testing clips, as exemplified in Fig.03.
It is readily apparent that the spectrogram converted by <strong>PAVITS</strong> exhibits finer details in prosody variations within the pertinent frequency bands, while simultaneously preserving descriptive information for other frequency bands.
Consequently, the audio generated by <strong>PAVITS</strong> possesses a prosody naturalness and emotional accuracy that closely approximates the ground truth spectrogram.</p>
</blockquote>
<h3 id="34ablation-study">3.4.Ablation Study<a class="headerlink" href="#34ablation-study" title="Permanent link">&para;</a></h3>
<blockquote>
<p>We further conduct an ablation study to validate different contributions.We remove prosody predictor, prosody alignment, and prosody integrator in turn and let the subjects evaluate quality and naturalness of converted audio.
From Tab.03, we can see that all scores are degraded with the removal of different components.
When remove prosody predictor, the speech quality does not undergo significant changes, as the original VITS primarily relies on textual features as input.
However, a significant decrease in naturalness is observed, attributed to the loss of explicit emotion label for TPP module as a conditioning factor.
This highlights the importance of aligning with APM module on the basis of information asymmetry, which reflects the ingenious design of prosody modeling structure.
Note that the performance of <strong>PAVITS</strong> is worse than VITS after deleting prosody alignment, it might be attributed the fact that latent prosody representations are not constrained during training, which damages the original MAS mechanism present in VITS.
To further show the contribution from the prosody integrator, we replace it with a simple concatenation.
Both speech quality and naturalness show a slight decrease, indicating that utilizing prosody integrator for information fusion is quite effective for APM module.</p>
</blockquote>
<h2 id="4conclusion">4.Conclusion<a class="headerlink" href="#4conclusion" title="Permanent link">&para;</a></h2>
<blockquote>
<p>In this paper, we propose <strong>Prosody-Aware VITS (PAVITS)</strong> for emotional voice conversion (EVC).
By integrating acoustic prosody modeling (APM) module with textual prosody prediction (TPP) module through prosody alignment, the fine-grained emotional prosody features across various scales of emotional speech can be learned effectively.
Experimental results on ESD corpus demonstrate the superiority of our proposed <strong>PAVITS</strong> for content naturalness and emotional naturalness, even when dealing with limited data scenarios.
In the future, we will explore the controllable emotional prosody modeling to allow better interpretability of EVC.</p>
</blockquote>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>